# ビンゴアプリ 要件定義書

## 1. 概要
PC、タブレット、スマートフォンを用いて、結婚式二次会やイベントなどで利用できるビンゴ大会アプリ。
リアルタイム性を重視し、司会者（Host）、管理者（Admin）、参加者（Participant）の3つの役割を持つ。

## 2. システム構成
- **Frontend**: Next.js (React)
- **Backend**: NestJS
- **Infrastructure**: AWS Amplify
- **Communication**: WebSocket (Socket.io) for real-time events

## 3. 機能要件

### 3.1 管理画面 (Admin)
**ターゲットデバイス**: PC, タブレット
**主な機能**:
- **ゲーム管理**:
    - 新規ゲームルームの作成
    - ゲームの状態管理（開始、一時停止、終了、リセット）
- **参加者管理**:
    - 現在の参加者一覧表示
    - 参加者数表示
    - ビンゴ/リーチ達成者の確認
    - (Option) 不適切な参加者の強制退出

### 3.2 司会用画面 (Host)
**ターゲットデバイス**: PC (プロジェクター投影を想定)
**主な機能**:
- **参加用QRコード表示**: 参加者がスマホで読み取るためのQRコードとURLを表示。
- **抽選機能 (Spin)**:
    - 「スタート/ストップ」または「引く」ボタンで数字を抽選。
    - ドラムロール等の抽選アニメーション演出。
- **抽選結果表示**:
    - 現在出た数字を大きく表示。
    - 過去に出た数字の一覧表示（履歴）。
- **状況表示**:
    - 現在のリーチ人数、ビンゴ人数の表示。
    - ビンゴ達成者が出た際のアラート/演出。

### 3.3 参加者用画面 (Participant)
**ターゲットデバイス**: スマートフォン
**主な機能**:
- **ゲーム参加**:
    - **ログイン不要**: アカウント作成やログインは一切不要。
    - **名前入力**: 参加者は名前（ニックネーム）を入力するだけで即座に参加可能。
    - **再接続**: ブラウザを閉じても復帰できるよう、参加情報はブラウザ（LocalStorage等）に保存。
    - 待機画面表示。
- **ビンゴカード表示**:
    - 5x5のビンゴカード自動生成（中央はFREE）。
    - 抽選された数字がカードにある場合、ハイライト表示。
- **穴あけアクション**:
    - 該当する数字をタップすることで「穴が開く」アニメーションとステータス更新。
    - 誤タップ防止（抽選されていない数字は押せない、または警告）。
- **リーチ・ビンゴ演出**:
    - リーチ確定時に「リーチ！」演出。
    - ビンゴ確定時に「ビンゴ！」ボタン出現または自動演出。
    - ビンゴ達成をサーバーに通知。

## 4. 非機能要件
- **リアルタイム性**: 抽選結果やリーチ・ビンゴ状況は遅延なく全端末に同期されること。
- **レスポンシブデザイン**: 各役割に応じた最適なUI/UXを提供する。
    - Host: 視認性重視、大画面対応。
    - Participant: スマホ操作性重視、誤操作防止。
- **演出 (Aesthetics)**:
    - **テーマ**: "Midnight Gala" (高級感のあるナイトパーティー)。
    - **カラーパレット**:
        - ベース: Deep Navy / Black (`#0a0a1a`)
        - アクセント: Gold (`#ffd700`), Neon Pink (`#ff007f`), Cyan (`#00ffff`)
        - テキスト: White / Off-white
    - **デザイン要素**:
        - Glassmorphism (すりガラス効果) を多用し、モダンな印象を与える。
        - 繊細なグラデーションと光彩（Glow effects）。
    - **アニメーション**:
        - **数字抽選**: ドラムロール風の高速回転演出（スロットマシンのようなワクワク感）。
        - **穴あけ**: タップ時にパーティクルが弾けるエフェクト。
        - **Bingo/Reach**: 画面全体を使った祝福エフェクト（紙吹雪、花火）。
        - **トランジション**: 画面遷移や状態変化はすべてスムーズなアニメーションで行う（Framer Motion使用）。

## 5. データモデル (概略)
- **Room**: `roomId`, `status` (WAITING, PLAYING, ENDED), `numbersDrawn` (Array<number>), `createdAt`
- **Participant**: `id`, `roomId`, `name`, `card` (5x5 Array), `isReach`, `isBingo`, `socketId`
